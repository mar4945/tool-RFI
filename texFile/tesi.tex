           %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
           %    Autore: Mario Terlizzi       %
           %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%





                                 %            %%
                                 %             %
   %%%%  % %%   %%%   %%%% %%%%  %%%%   %%%    %    %%%
   %   % %%  % %   % %   % % % % %   % %   %   %   %   %
   %   % %     %%%%% %   % % % % %   % %   %   %   %   %
   %   % %     %     %  %% % % % %   % %   %   %   %   %
   %%%%  %      %%%%  %% % % % % %%%%   %%%   %%%   %%%
   %
   %


%Le parole italian ed english istruiscono il tex a sillabare una porzione di testo con le regole rispettivamente in italiano ed inglese. Per passare da italiano ad inglese è sufficiente utilizzare il comando

% per tornare poi all'italiano \selectlanguage{italian}
\documentclass[11pt,a4paper,oneside,english]{book} 
\setcounter{secnumdepth}{4}
% Usare "oneside" invece di "twoside" nelle bozze, per risparmiare carta: "twoside" produce diverse pagine bianche alla fine dei capitoli.

%Questo pacchetto consente di impostare i margini del documento. La prola headsep sta indicare l'altezza dell'intestazione, mentre il footskip indica la dimensione dello scalino a piè pagina


\usepackage[a4paper]{geometry}
\geometry{verbose, tmargin=4cm, bmargin=4cm, lmargin=3cm, rmargin=3cm, headsep=0.5cm, footskip=1cm}
%Necessario per creare delle box in un'immagine
\usepackage[export]{adjustbox}

% for spacing text
\usepackage{setspace}

% for the upper and lower lines along the papers
\usepackage{fancyhdr}
\pagestyle{fancy} %Stile che consente di inserire le barre nei capitoli con il nome dell'attuale sezione ed il numero della pagina
\renewcommand{\chaptermark}[1]{\markboth{#1}{}}
\renewcommand{\sectionmark}[1]{\markright{\thesection\ #1}}
\fancyhf{}
\fancyhead[LE,RO]{\bfseries\thepage}
\fancyhead[LO]{\bfseries\rightmark}
\fancyhead[RE]{\bfseries\leftmark}
\renewcommand{\headrulewidth}{0.5pt}
\renewcommand{\footrulewidth}{0.5pt}
\setlength{\headheight}{14.5pt}

\usepackage{xcolor}
% === Tikz Packages ==================
\usepackage{tikz}
\pgfdeclarelayer{foreground}
\pgfsetlayers{background,main,foreground}
\usetikzlibrary{calc, trees, positioning, arrows, chains, shapes.geometric, quotes, angles, 
	decorations.pathreplacing, decorations.pathmorphing, shapes, decorations.markings, matrix, 
	shapes.symbols, automata, backgrounds, calc, patterns, shadows.blur, spy, fit}

\tikzstyle{vecArrow} = [thick, decoration={markings,mark=at position
	1 with {\arrow[semithick]{open triangle 60}}},
double distance=1.4pt, shorten >= 5.5pt,
preaction = {decorate},
postaction = {draw,line width=1.4pt, white,shorten >= 4.5pt}]
\usepackage{glossaries}
\usepackage{amsmath}
\usepackage{amsfonts} % for \mathbb
\usepackage{amsthm}

\usepackage{pgfplots} % Load the pgfplots package

\usetikzlibrary{positioning}

\usepackage{tikz}
\pgfdeclarelayer{foreground}
\pgfsetlayers{background,main,foreground}
\usetikzlibrary{calc, trees, positioning, arrows, chains, shapes.geometric, quotes, angles, 
	decorations.pathreplacing, decorations.pathmorphing, shapes, decorations.markings, matrix, 
	shapes.symbols, automata, backgrounds, calc, patterns, shadows.blur, spy, fit}

\tikzstyle{vecArrow} = [thick, decoration={markings,mark=at position
	1 with {\arrow[semithick]{open triangle 60}}},
double distance=1.4pt, shorten >= 5.5pt,
preaction = {decorate},
postaction = {draw,line width=1.4pt, white,shorten >= 4.5pt}]

\usepackage{multirow}
\usetikzlibrary{positioning}
\usetikzlibrary{spy} % Load the spy library
\usepgfplotslibrary{fillbetween}% fillbetween library is loaded
\usetikzlibrary{shapes.geometric, arrows}



\usepackage{algorithm}
\usepackage[noend]{algpseudocode}

\makeatletter
\def\BState{\State\hskip-\ALG@thistlm}
\makeatother




\usepackage{appendix}
\usepackage{graphicx} % for including graphics
\usepackage{subcaption} % for subfigures

\usepackage{mathtools}
\usepackage{optidef}
\usepackage{multirow}
\usetikzlibrary{positioning}
\usepackage{amsmath}

\usepackage{siunitx} % Load the siunitx package
\DeclareSIUnit\pixel{pixel}
\DeclareMathOperator{\arctantwo}{arctan2}
\DeclareMathOperator*{\argmax}{argmax} % thin space, limits 
\newcommand{\pazocal}[1]{\mathcal{#1}}
\usepackage{mathpazo}

\usepackage{comment}

\usepackage{pgfplots}


\usepgfplotslibrary{groupplots}


% For DEFINITIONS
\newcounter{Definition}
\setcounter{Definition}{0}

\newcommand{\displayDefinitions}[1][]{%
	\stepcounter{Definition}%
	\hypertarget{#1}{\theDefinition}%
}

\newcommand{\refDefinitions}[1][]{%
	\myhyperlink{#1}%
}

\newtheorem*{remark}{Remark}
\newtheorem{theorem}{Theorem}[section]

\theoremstyle{definition}
\newtheorem{definition}{Definition}

\newtheorem{lemma}[theorem]{Lemma}

% For THEOREMS
\newcounter{Theorem}
\setcounter{Theorem}{0}

\newcommand{\displayTheorems}[1][]{%
	\stepcounter{Theorem}%
	\hypertarget{#1}{\theTheorem}%
}

\newcommand{\refTheorems}[1][]{%
	\myhyperlink{#1}%
}

% Apply the custom theorem style
\theoremstyle{nopoint}
\newtheorem{definitionNoPoint}{Definition}

\makeglossaries
% Acronyms
% Part 1 -Chapter 4
\newacronym{CoM}{CoM}{Center of Mass}
\newacronym{FOV}{FoV}{Field of View}
\newacronym{IBVS}{IBVS}{Image-Based Visual Servoing}
\newacronym{IPS}{IPS}{Image Processing System}
\newacronym{MAV}{MAV}{Micro Aerial Vehicle}
\newacronym{NGL}{NGL}{Nonlinear Guidance Law}
\newacronym{TP}{TP}{Trajectory Planning}
\newacronym{PI}{PI}{Proportial-Integral}
\newacronym{PP}{PP}{Path Planner}
\newacronym{UAV}{UAV}{Unmanned Aerial Vehicle}
\newacronym{VR}{VR}{Virtual Reality}
\newacronym{VTP}{VTP}{Virtual Target Point}
\newacronym{IMG}{IMG}{IMG}

% Part 2 -Chapter 6
\newacronym{mpc}{MPC}{Model Predictive Control}
\newacronym{nmpc}{NMPC}{Nonlinear Model Predictive Control}
\newacronym{imps}{I-MPS}{Informative Model Predictive Scheme}
\newacronym{ml}{ML}{Machine Learning}
\newacronym{av}{AV}{Autonomous Vehicle}
\newacronym{can}{CAN}{Control Area Network}
\newacronym{nlp}{NLP}{Non Linear Program}
\newacronym{ekf}{EKF}{Extended Kalman Filter}
\newacronym{kl}{KL}{Kullback-Leibler}
\newacronym{csvm}{CSVM}{Cubic Support Vector Machine}
\newacronym{ra}{RA}{Replay Attack}
\newacronym{dos}{DoS}{Denial of Service}
\newacronym{ocp}{OCP}{Optimal Control Problem}
\newacronym{adas}{ADAS}{Advanced Driver Assistance System}
\newacronym{nhsta}{NHTSA}{American National Highway Traffic Safety Administration}
\newacronym{ecu}{ECU}{Electronic Control Unit}
\newacronym{ad}{AD}{Autonomous Driving}
\newacronym{bkst}{BKST}{Nonlinear Backstepping Control}
\newacronym{lqr}{LQR}{Linear-Quadratic Regulator}
\newacronym{lti}{LTI}{Linear-Time-Invariant}
\newacronym{ltimpc}{LTI-MPC}{Linear-Time-Invariant Model preditive Controller}
\newacronym{ltvmpc}{LTV-MPC}{Linear-Time-Varying Model Preditive Controller}
\newacronym{lpvmpc}{LPV-MPC}{Linear-Parameter-Varying Model Preditive Controller}

% Part 3 
\newacronym{ertms}{ERTMS}{European Railway Traffic Management System}
\newacronym{ertmsL1}{L1}{ERTMS Level 1}
\newacronym{ertmsL2}{L2}{ERTMS Level 2}
\newacronym{l3}{L3}{ERTMS Level 3}
\newacronym{l3vc}{L3 $\rightarrow$ VC}{L3-VC Transition Level}
\newacronym{vcl3}{L3 $\leftarrow$ VC}{VC-L3 Transition Level}
\newacronym{rbc}{RBC}{Radio Block Centre}
\newacronym{is}{IS}{Interlocking System}
\newacronym{eoa}{EoA}{End of Authority}
\newacronym{loa}{LoA}{Limit of Authority}
\newacronym{ma}{MA}{Movement Authority}
\newacronym{evc}{EVC}{European Vital Computer}
\newacronym{rfi}{RFI}{Rete Ferroviaria Italiana}
\newacronym{taliro}{S-TALIRO}{S-TemporAl LogIc RObustness}
\newacronym{ato}{ATO}{Automatic Train Operation}
\newacronym{bts}{BTS}{Base Transceiver Station}
\newacronym{etcs}{ETCS}{European Train Control System}
\newacronym{stl}{STL}{Signal Temporal Logic}
\newacronym{pr}{PR}{Position Report}
\newacronym{vc}{VC}{Virtual Coupling}
\newacronym{vcts}{VCTS}{Virtually Coupled Train Sets}
\newacronym{rl}{RL}{Reinforcement Learning}
\newacronym{ddpg}{DDPG}{Deep Deterministic Policy  Gradient }
\newacronym{v2i}{V2I}{Vehicle-to-Infrastructure}
\newacronym{v2v}{V2V}{Vehicle-to-Vehicle}
\newacronym{ltv-mpc}{LTV-MPC}{Linear Temporal Varying Model Predictive Control}
\newacronym{rlp}{RLP}{Robust Lower Proxy}
\newacronym{rup}{RUP}{Robust Upper Proxy}

\newacronym{h-nmpc}{H-NMPC}{Hybrid-Nonlinear Model Predictive Control}
\newacronym{t-nmpc}{T-NMPC}{Tracking-Nonlinear Model Predictive Control}
\newacronym{ecd}{ECD}{Event Collision Detector}

\newacronym{uc}{UC}{Unsafe Condition}
\newacronym{uc1}{UC1}{Unsafe Condition 1}
\newacronym{uc2}{UC2}{Unsafe Condition 2}
\newacronym{sc}{SC}{Safe Condition}
\newacronym{os}{OS}{Operational Scenario}


% === Color Packages =================
% Persona  command
\newcommand{\red}[1]{% Make the text red
	{\color{red}{#1}}% 
}

\newcommand{\blue}[1]{% Make the text red
	{\color{blue}{#1}}% 
}

\newcommand{\green}[1]{% Make the text red
	{\color{green}{#1}}% 
}

\newcommand{\tildeAdd}{~}
\newcounter{qcounter}

\usepackage{ulem}



% per non far spezzare le parole sue piu righe
\usepackage[none]{hyphenat}
\sloppy



%Da qui inizia il documento, fino ad ora si è preparato il preambolo
\begin{document}

%Titolo della tesi
\frontmatter


  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  %   Si puo` scegliere fra scrivere tutta la tesi in un    %
  %   solo file, oppure distribuire ogni capitolo in un     %
  %   file a parte. Qui si e` scelto tenere separati i      %
  %   vari capitoli, che vengono caricati con \include      %
  %  questo facilita non solo la fase di revisione ma       %
  %  ma anche la lettura del codice TeX attraverso un ap-   %
  %  -proccio di tipo modulare
  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\renewcommand{\theequation}{\arabic{equation}}%consigliato per migliorare i numeri di equazione nell'introduzione
\renewcommand{\thesection}{\arabic{section}}  %consigliato per migliorare i numeri di equazione nell'introduzione

%Frontespizio e dedica della tesi
\input{frontespizio}

\onehalfspacing


%Numerazione delle prime pagine in numeri romani
\pagenumbering{roman}

%Set del conunter al valore 1, questo evita che vengono conteggiate anche la pagine del frontespizio, facendo partire il conteggio da 3 piuttosto che da 1
\setcounter{page}{0}
% Turn on the fancy page style


%Indice della tesi
\tableofcontents

\input{summary}
% Print list of acronyms

%\listoffigures % Generates the list of figures
%\listoftables % Generates the list of tables



\pagestyle{fancy}
%file tex a parte
%\input{sommario}
%\input{introduzione}


%Da inserirsi prima dei tex in cui vi è il corpo della tesi, i diversi capitoli, pena mancato
%avvio del conteggio


%Da qui in poi sono riportati i tex contenenti i capitoli della tesi. I diversi capitoli sono
%richiamati all'interno del preambolo utilizzando il comando \include. Inoltre, attraverso il 
%comando \part è possibile suddividere la tesi in parti che prendo il nome dal testo racchiuso tra
%parentesi graffe


\input{Introduction}

\renewcommand{\theequation}{\arabic{chapter}.\arabic{equation}} %si torna alle formule numerate come da default
\renewcommand{\thesection}{\arabic{chapter}.\arabic{section}} %consigliato per migliorare i numeri di equazione nell'introduzione


\mainmatter
\input{background}
%\input{literature_review}

%\part{Background and prior knowledge}
%\input{Background}
\part{PERCEPTION}
\label{part:1}
\input{part1}

\part{LEARNING}
\label{part:2}
\input{part2}

\part{COOPERATION}
\label{part:3}
\input{part3}


%\part{Process Monitoring and Learning}

%\input{Part2_ProcessMonitoring}
\input{conclusion.tex}
%Parte che richiama gli appendici


%Parte che richiama gli appendici
\part{Appendix}

%Cambia la numerazione da numeri a lettere
\renewcommand{\thesection}{\Alph{chapter}.\arabic{section}}

%File LaTeX per la gestione degli appendici
\begin{appendices}
	\input{appUAV}
	\input{AppendiceA}
	\input{AppendiceB}
\end{appendices}



\backmatter


%La bibliografia è scritta utilizzando lo stile IEEE Transaction. I contenuti bibliografici, da poi richiamare nel testo, sono descritti nel file .bib
\normalem
\bibliographystyle{IEEEtran}
\bibliography{IEEEabrv,bib}

\end{document}